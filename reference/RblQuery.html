<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Query Bloomberg and Fetch Data — RblQuery • RblDataLicense</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Query Bloomberg and Fetch Data — RblQuery"><meta property="og:description" content="The function provides a high level interface to Bloomberg Datalicense 'getdata' and 'gethistory' programs."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RblDataLicense</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/eguidotti/RblDataLicense/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Query Bloomberg and Fetch Data</h1>
    <small class="dont-index">Source: <a href="https://github.com/eguidotti/RblDataLicense/blob/HEAD/R/RblQuery.R" class="external-link"><code>R/RblQuery.R</code></a></small>
    <div class="hidden name"><code>RblQuery.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The function provides a high level interface to Bloomberg Datalicense 'getdata' and 'gethistory' programs.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">RblQuery</span><span class="op">(</span></span>
<span>  <span class="va">identifiers</span>,</span>
<span>  <span class="va">fields</span>,</span>
<span>  from <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  auto.assign <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  env <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  category <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  add_headers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  overrides <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  limit <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  split <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  frequency <span class="op">=</span> <span class="fl">60</span>,</span>
<span>  timeout <span class="op">=</span> <span class="fl">3600</span>,</span>
<span>  filename <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"%m%d%H%M%S"</span><span class="op">)</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>identifiers</dt>
<dd><p>vector of Bloomberg identifiers. E.g. c('SXXE Index', 'SX5E Index')</p></dd>


<dt>fields</dt>
<dd><p>vector of Bloomberg fields. E.g. c('PX_LAST', 'PX_CLOSE', 'PX_OPEN', 'PX_HIGH', 'PX_LOW')</p></dd>


<dt>from</dt>
<dd><p>date or string (format YYYY-MM-DD). Start time for the 'gethistory' request. If not provided, a 'getdata' request will be made</p></dd>


<dt>to</dt>
<dd><p>date or string (format YYYY-MM-DD). End time for the 'gethistory' request. Ignored if <em>from</em> is not provided</p></dd>


<dt>auto.assign</dt>
<dd><p>logical. Should results be loaded to env? Ignored if <em>from</em> is not provided</p></dd>


<dt>env</dt>
<dd><p>where to create objects if auto.assign = TRUE</p></dd>


<dt>category</dt>
<dd><p>vector of Data License categories to enable. E.g. c('SECMASTER', 'PRICING', 'FUNDAMENTALS'). WARNING! Each DL category is billed separately, so check your DL license carefully!</p></dd>


<dt>add_headers</dt>
<dd><p>named vector of additional headers. E.g. c(PROGRAMFLAG = 'oneshot')</p></dd>


<dt>overrides</dt>
<dd><p>named vector of Bloomberg overrides. E.g. c('END_DT' = '20100101')</p></dd>


<dt>limit</dt>
<dd><p>prevent requesting data for more than this amout of identifiers. This is done to help you keeping your budget under control. Data License is billing based on the amout of instruments you request, so check your DL license carefully before increasing this limit.</p></dd>


<dt>split</dt>
<dd><p>maximum number of identifiers to process at once. Requests are split to avoid memory leaks.</p></dd>


<dt>frequency</dt>
<dd><p>the polling frequency to check if the response file is available at Bloomberg</p></dd>


<dt>timeout</dt>
<dd><p>the timeout in seconds</p></dd>


<dt>filename</dt>
<dd><p>name assigned to the remote file. Only alphanumeric characters are allowed. Invalid characters are removed.</p></dd>


<dt>verbose</dt>
<dd><p>logical. Should R report extra information on progress?</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A list with components</p><dl><dt>req</dt>
<dd><p>List of characters representing each of the request files uploaded to Bloomberg</p></dd>

 <dt>out</dt>
<dd><p>List of characters representing each of the response file downloaded from Bloomberg</p></dd>

 <dt>data</dt>
<dd><p>Return of <code><a href="RblParse.html">RblParse</a></code></p></dd>


</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>The following routine to query Bloomberg is implemented:</p><dl><dt>Build the request file</dt>
<dd><p>see <code><a href="RblRequestBuilder.html">RblRequestBuilder</a></code></p></dd>

 <dt>Upload the request file</dt>
<dd><p>see <code><a href="RblUpload.html">RblUpload</a></code></p></dd>

 <dt>Download the response file</dt>
<dd><p>see <code><a href="RblDownload.html">RblDownload</a></code></p></dd>

 <dt>Parse the response file</dt>
<dd><p>see <code><a href="RblParse.html">RblParse</a></code></p></dd>


</dl></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># Run RblConnect first</span></span></span>
<span class="r-in"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">RblQuery</span><span class="op">(</span>fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'PX_LAST'</span>, <span class="st">'PX_OPEN'</span>, <span class="st">'PX_HIGH'</span>, <span class="st">'PX_LOW'</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                 identifiers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'SXXE Index'</span>, <span class="st">"SX5E Index"</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                 from <span class="op">=</span> <span class="st">'2005-01-01'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://eguidotti.com" class="external-link">Emanuele Guidotti</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

